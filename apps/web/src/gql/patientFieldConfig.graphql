query GetPatientFieldConfig($clinicId: bigint!) {
  # Get all available field configs
  field_config(where: { is_active: { _eq: true } }, order_by: { label: asc }) {
    id
    key
    label
    is_active
  }
  # Get clinic-specific patient field configs
  patient_field_config(
    where: { clinic_id: { _eq: $clinicId } }
    order_by: { display_order: asc }
  ) {
    id
    clinic_id
    field_config_id
    display_order
    is_displayed
    is_required
    field_config {
      id
      key
      label
      is_active
    }
  }
}

mutation UpdatePatientFieldConfig(
  $id: bigint!
  $displayOrder: Int
  $isDisplayed: Boolean
  $isRequired: Boolean
) {
  update_patient_field_config_by_pk(
    pk_columns: { id: $id }
    _set: {
      display_order: $displayOrder
      is_displayed: $isDisplayed
      is_required: $isRequired
    }
  ) {
    id
    display_order
    is_displayed
    is_required
    field_config {
      id
      key
      label
    }
  }
}

mutation UpdatePatientFieldConfigOrder($id: bigint!, $displayOrder: Int!) {
  update_patient_field_config_by_pk(
    pk_columns: { id: $id }
    _set: {
      display_order: $displayOrder
    }
  ) {
    id
    display_order
  }
}

mutation UpdatePatientFieldConfigDisplay($id: bigint!, $isDisplayed: Boolean!) {
  update_patient_field_config_by_pk(
    pk_columns: { id: $id }
    _set: {
      is_displayed: $isDisplayed
    }
  ) {
    id
    is_displayed
  }
}

mutation UpdatePatientFieldConfigRequired($id: bigint!, $isRequired: Boolean!) {
  update_patient_field_config_by_pk(
    pk_columns: { id: $id }
    _set: {
      is_required: $isRequired
    }
  ) {
    id
    is_required
  }
}

mutation CreatePatientFieldConfig(
  $clinicId: bigint!
  $fieldConfigId: bigint!
  $displayOrder: Int!
  $isDisplayed: Boolean!
  $isRequired: Boolean!
) {
  insert_patient_field_config_one(
    object: {
      clinic_id: $clinicId
      field_config_id: $fieldConfigId
      display_order: $displayOrder
      is_displayed: $isDisplayed
      is_required: $isRequired
    }
  ) {
    id
    clinic_id
    field_config_id
    display_order
    is_displayed
    is_required
    field_config {
      id
      key
      label
      is_active
    }
  }
}

